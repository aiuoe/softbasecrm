<div [@routerTransition]>
    <div class="content d-flex flex-column flex-column-fluid">
        <sub-header
            [title]="('Customers' | localize)"
            [breadcrumbs]="breadcrumbs"
            [hideSeparator]="true"
        >
            <div role="actions">
                <button (click)="goToAccounts()" class="btn btn-secondary float-left" [buttonBusy]="saving">
                    <span>{{ l('Close') }}</span>
                </button>
            </div>
        </sub-header>

        <div [class]="containerClass">
            <tabset>
                <tab heading="{{ 'Overview' | localize }}">
                    <div class="row">
                        <div class="col-12">
                            <div class="card card-custom card-in-tab gutter-b">
                                <div class="card-body">
                                    <div class="row" *ngIf="this.showSaveButton">
                                        <div class="col-12">
                                            <button (click)="save()" class="btn btn-primary blue float-right" [buttonBusy]="saving"
                                                    [busyText]="l('SavingWithThreeDot')">
                                                <i class="fa fa-save"></i>
                                                <span>{{ l('Save') }}</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <form #customerForm="ngForm" role="form" class="form-validation" novalidate>

                                                <h3 class="font-size-lg text-dark font-weight-bold mb-6">
                                                    <i class="pi pi-user"></i>
                                                    {{ l('GeneralInformation') }}
                                                </h3>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_Name">{{ l('CompanyName') }} <span class="color-red">*</span></label>
                                                            <input
                                                                type="text"
                                                                #Customer_Name="ngModel"
                                                                id="Customer_Name"
                                                                class="form-control"
                                                                [(ngModel)]="customer.name"
                                                                name="Name"
                                                                minlength="0"
                                                                maxlength="255"
                                                                required
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_Name"></validation-messages>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_Phone">{{ l('CompanyPhone') }} <span class="color-red">*</span></label>
                                                            <input
                                                                type="text"
                                                                #Customer_Phone="ngModel"
                                                                id="Customer_Phone"
                                                                class="form-control"
                                                                [(ngModel)]="customer.phone"
                                                                name="Phone"
                                                                minlength="0"
                                                                maxlength="255"
                                                                required
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_Phone"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_EMail">{{ l('CompanyEmail') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_EMail="ngModel"
                                                                id="Customer_EMail"
                                                                class="form-control"
                                                                [(ngModel)]="customer.eMail"
                                                                name="EMail"
                                                                minlength="0"
                                                                maxlength="1000"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_EMail"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_WWWAddress">{{ l('WebSite') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_WWWAddress="ngModel"
                                                                id="Customer_WWWAddress"
                                                                class="form-control"
                                                                [(ngModel)]="customer.wwwAddress"
                                                                name="WWWAddress"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_WWWAddress"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_Address">{{ l('Address') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_Address="ngModel"
                                                                id="Customer_Address"
                                                                class="form-control"
                                                                [(ngModel)]="customer.address"
                                                                name="Address"
                                                                minlength="0"
                                                                maxlength="255"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_Address"></validation-messages>
                                                        </div>

                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_POBox">{{ l('POBox') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_POBox="ngModel"
                                                                id="Customer_POBox"
                                                                class="form-control"
                                                                [(ngModel)]="customer.poBox"
                                                                name="POBox"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_POBox"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_Country">{{ l('Country') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_Country="ngModel"
                                                                id="Customer_Country"
                                                                class="form-control"
                                                                [(ngModel)]="customer.country"
                                                                name="Country"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_Country"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_State">{{ l('State') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_State="ngModel"
                                                                id="Customer_State"
                                                                class="form-control"
                                                                [(ngModel)]="customer.state"
                                                                name="State"
                                                                minlength="0"
                                                                maxlength="255"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_State"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_City">{{ l('City') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_City="ngModel"
                                                                id="Customer_City"
                                                                class="form-control"
                                                                [(ngModel)]="customer.city"
                                                                name="City"
                                                                minlength="0"
                                                                maxlength="255"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_City"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_ZipCode">{{ l('ZipCode') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_ZipCode="ngModel"
                                                                id="Customer_ZipCode"
                                                                class="form-control"
                                                                [(ngModel)]="customer.zipCode"
                                                                name="ZipCode"
                                                                minlength="0"
                                                                maxlength="255"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_ZipCode"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <hr>
                                                <h3 class="font-size-lg text-dark font-weight-bold mb-6">
                                                    <i class="fa fa-id-card"></i>
                                                    {{ l('Details') }}
                                                </h3>

                                                <div class="row" *ngIf="!this.isNew">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_Number">{{ l('CustomerNumber') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_Number="ngModel"
                                                                id="Customer_Number"
                                                                class="form-control"
                                                                [(ngModel)]="customer.number"
                                                                name="Number"
                                                                minlength="0"
                                                                maxlength="100"
                                                                readonly
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_Number"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Customer_BillTo">{{ l('BillTo') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_BillTo="ngModel"
                                                                id="Customer_BillTo"
                                                                class="form-control"
                                                                [(ngModel)]="customer.billTo"
                                                                name="BillTo"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_BillTo"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group m-form__group">
                                                            <label for="customerAccountTypeId">{{ l('AccountType') }}</label>
                                                            <p-dropdown id="customerAccountTypeId"
                                                                        [ngModelOptions]="{standalone: true}"
                                                                        [options]="allAccountTypes"
                                                                        [(ngModel)]="customer.accountTypeId"
                                                                        [disabled]="true"
                                                                        optionLabel="displayName">
                                                            </p-dropdown>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group m-form__group">
                                                            <label for="leadSourceId">{{ l('LeadSource') }}</label>
                                                            <p-dropdown id="leadSourceId"
                                                                        [showClear]="true"
                                                                        placeholder="Select"
                                                                        [ngModelOptions]="{standalone: true}"
                                                                        [options]="allLeadSources"
                                                                        [(ngModel)]="customer.leadSourceId"
                                                                        [disabled]="this.isReadOnlyMode"
                                                                        optionLabel="displayName">
                                                            </p-dropdown>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_DunsCode">{{ lupper('Duns') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_DunsCode="ngModel"
                                                                id="Customer_DunsCode"
                                                                class="form-control"
                                                                [(ngModel)]="customer.dunsCode"
                                                                name="DunsCode"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_DunsCode"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_SICCode">{{ lupper('SICCode') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_SICCode="ngModel"
                                                                id="Customer_SICCode"
                                                                class="form-control"
                                                                [(ngModel)]="customer.sicCode"
                                                                name="SICCode"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_SICCode"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_SICCode2">{{ lupper('SICCode2') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_SICCode2="ngModel"
                                                                id="Customer_SICCode2"
                                                                class="form-control"
                                                                [(ngModel)]="customer.sicCode2"
                                                                name="SICCode2"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_SICCode2"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_SICCode3">{{ lupper('SICCode3') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_SICCode3="ngModel"
                                                                id="Customer_SICCode3"
                                                                class="form-control"
                                                                [(ngModel)]="customer.sicCode3"
                                                                name="SICCode3"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_SICCode3"></validation-messages>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="Customer_SICCode4">{{ lupper('SICCode4') }}</label>
                                                            <input
                                                                type="text"
                                                                #Customer_SICCode4="ngModel"
                                                                id="Customer_SICCode4"
                                                                class="form-control"
                                                                [(ngModel)]="customer.sicCode4"
                                                                name="SICCode4"
                                                                minlength="0"
                                                                maxlength="50"
                                                                [disabled]="this.isReadOnlyMode"
                                                            />
                                                            <validation-messages [formCtrl]="Customer_SICCode4"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            <label for="Customer_BusinessDescription">{{ l('Description') }}</label>
                                                            <textarea #Customer_BusinessDescription="ngModel"
                                                                      id="Customer_BusinessDescription"
                                                                      class="form-control"
                                                                      [(ngModel)]="customer.businessDescription"
                                                                      [placeholder]="l('EnterDescription')"
                                                                      name="Description"
                                                                      rows="10"
                                                                      [disabled]="this.isReadOnlyMode"
                                                            >
                                                    </textarea>
                                                            <validation-messages [formCtrl]="Customer_BusinessDescription"></validation-messages>
                                                        </div>
                                                    </div>
                                                </div>

                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>

                <tab heading="{{ 'Opportunities' | localize }}" [hidden]="this.isNew">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card card-custom card-in-tab gutter-b">
                                <div class="card-body">

                                </div>
                            </div>
                        </div>
                    </div>
                </tab>

                <tab heading="{{ 'Invoices' | localize }}" [hidden]="this.hideInvoiceTab">
                    <div class="card card-custom card-in-tab gutter-b">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input
                                            class="form-control"
                                            id="StartEndRange"
                                            name="StartEndRange"
                                            #drp="bsDaterangepicker"
                                            readonly="readonly"
                                            bsDaterangepicker
                                            dateRangePickerLuxonModifier
                                            [(date)]="dateRange"
                                        />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <button (click)="getCustomerInvoices()" class="btn btn-primary blue float-right">
                                        <i class="fas fa-sync-alt"></i>
                                        <span>{{ l('RefreshData') }}</span>
                                    </button>
                                </div>
                            </div>
                            <div class="row align-items-center">
                                <div class="col-md-12">
                                    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelper.isLoading">
                                        <p-table
                                            id="dataTable"
                                            #customerInvoicesDataTable
                                            (onLazyLoad)="getCustomerInvoices($event)"
                                            [value]="primengTableHelper.records"
                                            rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
                                            [paginator]="false"
                                            [lazy]="true"
                                            [scrollable]="true"
                                            ScrollWidth="100%"
                                            [responsive]="primengTableHelper.isResponsive"
                                            [resizableColumns]="primengTableHelper.resizableColumns"
                                        >
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th style="width: 150px" pSortableColumn="name">
                                                        {{ lupper('PO') }}
                                                        <p-sortIcon field="customer.name"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="phone">
                                                        {{ l('Serial') }}
                                                        <p-sortIcon field="customer.phone"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="address">
                                                        {{ l('Unit') }}
                                                        <p-sortIcon field="customer.address"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('AssociatedDoc') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('RentalNumber') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>
                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Amount') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                                                <tr>
                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('PO') }}</span>
                                                        {{ record.poNumber }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Serial') }}</span>
                                                        {{ record.serial }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Unit') }}</span>
                                                        {{ record.unitNo }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('AssociatedDoc') }}</span>
                                                        {{ record.associatedWONo }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('RentalNumber') }}</span>
                                                        {{ record.rentalContractNo }}
                                                    </td>

                                                    <td style="width: 150px" class="text-right">
                                                        <span class="p-column-title">{{ l('Amount') }}</span>
                                                        {{ record.grandTotal | number:'1.2-2' }}
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
                                            {{ l('NoData') }}
                                        </div>
                                        <div class="primeng-paging-container">
                                            <p-paginator
                                                [rows]="primengTableHelper.defaultRecordsCountPerPage"
                                                #CustomerInvoicesPaginator
                                                (onPageChange)="getCustomerInvoices($event)"
                                                [totalRecords]="primengTableHelper.totalRecordsCount"
                                                [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
                                                [showCurrentPageReport]="true"
                                                [currentPageReportTemplate]="
                                        'TotalRecordsCount' | localize: primengTableHelper.totalRecordsCount
                                    "
                                            ></p-paginator>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>

                <tab heading="{{ 'Equipment' | localize }}" [hidden]="this.isNew">
                    <div class="card card-custom card-in-tab gutter-b">
                        <div class="card-body">

                            <div class="row pb-5">
                                <div class="col-md-12">
                                    <button (click)="getCustomerEquipments()" class="btn btn-primary blue float-right">
                                        <i class="fas fa-sync-alt"></i>
                                        <span>{{ l('RefreshData') }}</span>
                                    </button>
                                </div>
                            </div>

                            <div class="row align-items-center">
                                <div class="col-md-12">
                                    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelperEquipments.isLoading">
                                        <p-table
                                            #customerEquipmentsDataTable
                                            (onLazyLoad)="getCustomerEquipments($event)"
                                            [value]="primengTableHelperEquipments.records"
                                            rows="{{ primengTableHelperEquipments.defaultRecordsCountPerPage }}"
                                            [paginator]="false"
                                            [lazy]="true"
                                            [scrollable]="true"
                                            ScrollWidth="100%"
                                            [responsive]="primengTableHelper.isResponsive"
                                            [resizableColumns]="primengTableHelperEquipments.resizableColumns"
                                        >
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th style="width: 150px" pSortableColumn="name">
                                                        {{ l('Unit') }}
                                                        <p-sortIcon field="customer.name"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="phone">
                                                        {{ l('Serial') }}
                                                        <p-sortIcon field="customer.phone"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="address">
                                                        {{ l('Year') }}
                                                        <p-sortIcon field="customer.address"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Make') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Model') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Meter') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('TotalExp') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('ExpMeter') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                                                <tr>
                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Unit') }}</span>
                                                        {{ record.unitNo }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Serial') }}</span>
                                                        {{ record.serial }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Year') }}</span>
                                                        {{ record.modelYear }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Make') }}</span>
                                                        {{ record.make }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Model') }}</span>
                                                        {{ record.model }}
                                                    </td>

                                                    <td style="width: 150px" class="text-right">
                                                        <span class="p-column-title">{{ l('Meter') }}</span>
                                                        {{ record.meter | number:'1.2-2' }}
                                                    </td>

                                                    <td style="width: 150px" class="text-right">
                                                        <span class="p-column-title">{{ l('TotalExp') }}</span>
                                                        {{ record.totalExp | number:'1.2-2' }}
                                                    </td>

                                                    <td style="width: 150px" class="text-right">
                                                        <span class="p-column-title">{{ l('ExpMeter') }}</span>
                                                        {{ record.expMeter | number:'1.2-2' }}
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <div class="primeng-no-data" *ngIf="primengTableHelperEquipments.totalRecordsCount == 0">
                                            {{ l('NoData') }}
                                        </div>
                                        <div class="primeng-paging-container">
                                            <p-paginator
                                                [rows]="primengTableHelperEquipments.defaultRecordsCountPerPage"
                                                #customerEquipmentsPaginator
                                                (onPageChange)="getCustomerInvoices($event)"
                                                [totalRecords]="primengTableHelperEquipments.totalRecordsCount"
                                                [rowsPerPageOptions]="primengTableHelperEquipments.predefinedRecordsCountPerPage"
                                                [showCurrentPageReport]="true"
                                                [currentPageReportTemplate]="
                                        'TotalRecordsCount' | localize: primengTableHelperEquipments.totalRecordsCount
                                    "
                                            ></p-paginator>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>


                <tab heading="{{ 'WIP' | localize }}" [hidden]="this.isNew">
                    <div class="card card-custom card-in-tab gutter-b">
                        <div class="card-body">

                            <div class="row pb-5">
                                <div class="col-md-12">
                                    <button (click)="getCustomerEquipments()" class="btn btn-primary blue float-right">
                                        <i class="fas fa-sync-alt"></i>
                                        <span>{{ l('RefreshData') }}</span>
                                    </button>
                                </div>
                            </div>

                            <div class="row align-items-center">
                                <div class="col-md-12">
                                    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelperWip.isLoading">
                                        <p-table
                                            #customerWipDataTable
                                            (onLazyLoad)="getCustomerWip($event)"
                                            [value]="primengTableHelperWip.records"
                                            rows="{{ primengTableHelperWip.defaultRecordsCountPerPage }}"
                                            [paginator]="false"
                                            [lazy]="true"
                                            [scrollable]="true"
                                            ScrollWidth="100%"
                                            [responsive]="primengTableHelper.isResponsive"
                                            [resizableColumns]="primengTableHelperWip.resizableColumns"
                                        >
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th style="width: 150px" pSortableColumn="name">
                                                        {{ l('Unit') }}
                                                        <p-sortIcon field="customer.name"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="phone">
                                                        {{ l('Serial') }}
                                                        <p-sortIcon field="customer.phone"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="address">
                                                        {{ l('Year') }}
                                                        <p-sortIcon field="customer.address"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Make') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Model') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('Meter') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('TotalExp') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>

                                                    <th style="width: 150px" pSortableColumn="accountTypeFk.description">
                                                        {{ l('ExpMeter') }}
                                                        <p-sortIcon field="accountTypeDescription"></p-sortIcon>
                                                    </th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                                                <tr>
                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Unit') }}</span>
                                                        {{ record.unitNo }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Serial') }}</span>
                                                        {{ record.serial }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Year') }}</span>
                                                        {{ record.modelYear }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Make') }}</span>
                                                        {{ record.make }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Model') }}</span>
                                                        {{ record.model }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('Meter') }}</span>
                                                        {{ record.meter }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('TotalExp') }}</span>
                                                        {{ record.totalExp }}
                                                    </td>

                                                    <td style="width: 150px">
                                                        <span class="p-column-title">{{ l('ExpMeter') }}</span>
                                                        {{ record.expMeter }}
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <div class="primeng-no-data" *ngIf="primengTableHelperWip.totalRecordsCount == 0">
                                            {{ l('NoData') }}
                                        </div>
                                        <div class="primeng-paging-container">
                                            <p-paginator
                                                [rows]="primengTableHelperWip.defaultRecordsCountPerPage"
                                                #customerWipPaginator
                                                (onPageChange)="getCustomerInvoices($event)"
                                                [totalRecords]="primengTableHelperWip.totalRecordsCount"
                                                [rowsPerPageOptions]="primengTableHelperWip.predefinedRecordsCountPerPage"
                                                [showCurrentPageReport]="true"
                                                [currentPageReportTemplate]="
                                        'TotalRecordsCount' | localize: primengTableHelperWip.totalRecordsCount
                                    "
                                            ></p-paginator>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>

                <tab heading="{{ 'Events' | localize }}" [hidden]="this.isNew">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card card-custom card-in-tab gutter-b">
                                <div class="card-body">

                                </div>
                            </div>
                        </div>
                    </div>
                </tab>

            </tabset>

        </div>
    </div>
</div>
